<!DOCTYPE html>
<html lang="es" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intermappler - Plataforma de Mapeo Inteligente</title>
    
    <!-- Meta tags SEO -->
    <meta name="description" content="Plataforma avanzada de mapeo e inteligencia geoespacial con IA predictiva y an√°lisis en tiempo real">
    <meta name="keywords" content="mapeo, geointeligencia, IA, GIS, cartograf√≠a, an√°lisis geoespacial">
    <meta name="author" content="Intermappler Technologies">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Intermappler - Mapeo Inteligente Avanzado">
    <meta property="og:description" content="Plataforma de mapeo e inteligencia geoespacial con IA predictiva">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://intermappler.com">
    <meta property="og:image" content="https://intermappler.com/og-image.jpg">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üó∫Ô∏è</text></svg>">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="manifest" href="/site.webmanifest">
    
    <!-- CSS -->
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="/css/styles.css" as="style">
    <link rel="preload" href="/js/theme.js" as="script">
    <link rel="preload" href="/js/language.js" as="script">
    <link rel="preload" href="/js/login.js" as="script">
    
    <!-- PWA -->
    <meta name="theme-color" content="#2563eb">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- Analytics Script (placeholder) -->
    <script>
        window.intermapplerConfig = {
            apiBaseUrl: '/api',
            environment: 'production',
            version: '3.2.1',
            features: {
                darkMode: true,
                multiLanguage: true,
                realTimeUpdates: true,
                geospatialAI: true
            }
        };
    </script>
    
    <!-- Critical CSS inline -->
    <style>
        /* Critical CSS to prevent FOUC */
        :root {
            --primary-color: #2563eb;
            --background: #f8fafc;
            --text-primary: #1e293b;
        }
        
        [data-theme="dark"] {
            --primary-color: #3b82f6;
            --background: #0f172a;
            --text-primary: #f1f5f9;
        }
        
        body {
            margin: 0;
            font-family: 'Inter', system-ui, sans-serif;
            background: var(--background);
            color: var(--text-primary);
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--background);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.3s ease;
        }
        
        .loader {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(37, 99, 235, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loader"></div>
        <div style="color: var(--primary-color); font-weight: 600;">Cargando Intermappler...</div>
    </div>

    <!-- Main Container -->
    <div class="container" id="mainContainer" style="opacity: 0;">
        <!-- Header -->
        <header class="header">
            <div class="brand">
                <div class="logo">
                    <i class="fas fa-map-marked-alt"></i>
                    <span class="logo-text">Intermappler</span>
                </div>
                <div class="tagline" id="tagline">Mapeo Inteligente Avanzado</div>
            </div>
            
            <div class="header-controls">
                <div class="language-selector">
                    <select id="languageSelect" class="language-dropdown" aria-label="Seleccionar idioma">
                        <option value="es">üá™üá∏ Espa√±ol</option>
                        <option value="en">üá∫üá∏ English</option>
                        <option value="fr">üá´üá∑ Fran√ßais</option>
                        <option value="de">üá©üá™ Deutsch</option>
                        <option value="pt">üáµüáπ Portugu√™s</option>
                    </select>
                </div>
                
                <div class="theme-toggle">
                    <button id="themeToggle" class="theme-btn" aria-label="Cambiar tema">
                        <i class="fas fa-moon"></i>
                        <span class="theme-text" id="themeText">Modo Oscuro</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <div class="login-wrapper">
                <!-- Left Panel - Platform Info -->
                <div class="platform-info">
                    <div class="platform-header">
                        <h1 class="platform-title">
                            <span class="highlight">Intermappler</span>
                            <span class="subtitle" id="platformSubtitle">Plataforma de Mapeo Inteligente</span>
                        </h1>
                        <div class="platform-badges">
                            <span class="badge badge-ai"><i class="fas fa-brain"></i> IA Geoespacial</span>
                            <span class="badge badge-realtime"><i class="fas fa-bolt"></i> Tiempo Real</span>
                            <span class="badge badge-secure"><i class="fas fa-shield-alt"></i> Enterprise</span>
                        </div>
                    </div>
                    
                    <div class="features-grid">
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-brain"></i>
                            </div>
                            <h3 id="feature1Title">IA Geoespacial</h3>
                            <p id="feature1Desc">An√°lisis predictivo con inteligencia artificial para mapeo avanzado</p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-layer-group"></i>
                            </div>
                            <h3 id="feature2Title">Capas Inteligentes</h3>
                            <p id="feature2Desc">Visualizaci√≥n multicapa con datos en tiempo real</p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-satellite"></i>
                            </div>
                            <h3 id="feature3Title">Sat√©lite en Vivo</h3>
                            <p id="feature3Desc">Im√°genes satelitales actualizadas y an√°lisis detallado</p>
                        </div>
                        
                        <div class="feature-card">
                            <div class="feature-icon">
                                <i class="fas fa-chart-network"></i>
                            </div>
                            <h3 id="feature4Title">Redes Complejas</h3>
                            <p id="feature4Desc">Mapeo de redes y conexiones con algoritmos optimizados</p>
                        </div>
                    </div>
                    
                    <div class="stats-container">
                        <div class="stat">
                            <span class="stat-number">15M+</span>
                            <span class="stat-label" id="stat1Label">Puntos Mapeados</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number">2.5K</span>
                            <span class="stat-label" id="stat2Label">Capas Activas</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number">99.8%</span>
                            <span class="stat-label" id="stat3Label">Precisi√≥n IA</span>
                        </div>
                    </div>
                    
                    <div class="platform-tech">
                        <h4>Tecnolog√≠as Utilizadas</h4>
                        <div class="tech-stack">
                            <span class="tech-item"><i class="fab fa-node-js"></i> Node.js</span>
                            <span class="tech-item"><i class="fas fa-database"></i> MongoDB</span>
                            <span class="tech-item"><i class="fab fa-python"></i> Python AI</span>
                            <span class="tech-item"><i class="fas fa-map"></i> Mapbox/Leaflet</span>
                            <span class="tech-item"><i class="fas fa-cloud"></i> Cloud Native</span>
                        </div>
                    </div>
                </div>

                <!-- Right Panel - Login Form -->
                <div class="login-form-container">
                    <div class="login-card">
                        <div class="form-header">
                            <h2 id="loginTitle">Iniciar Sesi√≥n</h2>
                            <p id="loginSubtitle">Accede a la plataforma de mapeo inteligente</p>
                        </div>
                        
                        <form id="loginForm" class="login-form">
                            <div class="input-group">
                                <label for="email">
                                    <i class="fas fa-user"></i>
                                    <span id="emailLabel">Correo Electr√≥nico</span>
                                </label>
                                <input type="email" id="email" name="email" placeholder="usuario@intermappler.com" required autocomplete="email">
                            </div>
                            
                            <div class="input-group">
                                <label for="password">
                                    <i class="fas fa-lock"></i>
                                    <span id="passwordLabel">Contrase√±a</span>
                                </label>
                                <div class="password-wrapper">
                                    <input type="password" id="password" name="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required autocomplete="current-password">
                                    <button type="button" id="togglePassword" class="password-toggle" aria-label="Mostrar contrase√±a">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="form-options">
                                <label class="checkbox-container">
                                    <input type="checkbox" id="rememberMe">
                                    <span class="checkmark"></span>
                                    <span id="rememberLabel">Recordar sesi√≥n</span>
                                </label>
                                <a href="#" class="forgot-link" id="forgotLink">¬øOlvidaste tu contrase√±a?</a>
                            </div>
                            
                            <button type="submit" class="login-btn" id="loginButton">
                                <i class="fas fa-sign-in-alt"></i>
                                <span id="loginButtonText">Acceder a Intermappler</span>
                            </button>
                            
                            <div class="divider">
                                <span id="orText">o continuar con</span>
                            </div>
                            
                            <div class="social-login">
                                <button type="button" class="social-btn google" id="googleLogin">
                                    <i class="fab fa-google"></i>
                                    <span>Google</span>
                                </button>
                                <button type="button" class="social-btn github" id="githubLogin">
                                    <i class="fab fa-github"></i>
                                    <span>GitHub</span>
                                </button>
                                <button type="button" class="social-btn microsoft" id="microsoftLogin">
                                    <i class="fab fa-microsoft"></i>
                                    <span>Microsoft</span>
                                </button>
                            </div>
                        </form>
                        
                        <div class="form-footer">
                            <p id="newUserText">¬øNuevo en Intermappler? <a href="#" class="register-link" id="registerLink">Solicitar acceso</a></p>
                            <p class="demo-info">
                                <i class="fas fa-info-circle"></i>
                                <span id="demoInfo">Prueba con: demo@intermappler.com / demo123</span>
                            </p>
                        </div>
                    </div>
                    
                    <div class="security-notice">
                        <i class="fas fa-shield-alt"></i>
                        <span id="securityText">Protegido con encriptaci√≥n AES-256 y autenticaci√≥n 2FA</span>
                    </div>
                    
                    <div class="api-status" id="apiStatus">
                        <i class="fas fa-circle"></i>
                        <span>Conectando al servidor...</span>
                    </div>
                </div>
            </div>
            
            <!-- Platform Demo Preview -->
            <div class="demo-preview">
                <h3>Vista Previa de la Plataforma</h3>
                <div class="demo-grid">
                    <div class="demo-item" data-feature="maps">
                        <i class="fas fa-map"></i>
                        <h4>Mapas Interactivos</h4>
                        <p>Explora datos geoespaciales en tiempo real</p>
                    </div>
                    <div class="demo-item" data-feature="analytics">
                        <i class="fas fa-chart-bar"></i>
                        <h4>An√°lisis Avanzado</h4>
                        <p>IA predictiva y an√°lisis de patrones</p>
                    </div>
                    <div class="demo-item" data-feature="collaboration">
                        <i class="fas fa-users"></i>
                        <h4>Colaboraci√≥n</h4>
                        <p>Trabajo en equipo en mapas compartidos</p>
                    </div>
                    <div class="demo-item" data-feature="export">
                        <i class="fas fa-download"></i>
                        <h4>Exportaci√≥n</h4>
                        <p>Multiple formatos: GeoJSON, KML, Shapefile</p>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <div class="footer-links">
                    <a href="#" id="termsLink">T√©rminos de Servicio</a>
                    <a href="#" id="privacyLink">Pol√≠tica de Privacidad</a>
                    <a href="#" id="docsLink">Documentaci√≥n</a>
                    <a href="#" id="apiLink">API</a>
                    <a href="#" id="supportLink">Soporte</a>
                    <a href="#" id="statusLink">Estado del Sistema</a>
                </div>
                
                <div class="copyright" id="copyrightText">
                    ¬© 2024 Intermappler Technologies. Plataforma de Mapeo Inteligente v3.2.1
                </div>
                
                <div class="footer-info">
                    <div class="status-indicator">
                        <span class="status-dot online"></span>
                        <span id="systemStatus">Sistema Operativo</span>
                    </div>
                    <div class="server-info">
                        <span id="serverTime">Cargando...</span>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- JavaScript -->
    <script src="/js/theme.js"></script>
    <script src="/js/language.js"></script>
    <script src="/js/login.js"></script>
    
    <!-- Application Initialization -->
    <script>
        class IntermapplerApp {
            constructor() {
                this.init();
            }
            
            async init() {
                try {
                    // Check server health
                    await this.checkServerHealth();
                    
                    // Initialize components
                    this.initComponents();
                    
                    // Setup event listeners
                    this.setupEventListeners();
                    
                    // Update dynamic content
                    this.updateDynamicContent();
                    
                    // Hide loading screen
                    this.hideLoadingScreen();
                    
                    console.log('üöÄ Intermappler Platform initialized successfully');
                    
                } catch (error) {
                    console.error('Error initializing app:', error);
                    this.showError('Error al inicializar la aplicaci√≥n');
                }
            }
            
            async checkServerHealth() {
                try {
                    const response = await fetch('/api/health');
                    const data = await response.json();
                    
                    const statusEl = document.getElementById('apiStatus');
                    if (data.status === 'healthy') {
                        statusEl.innerHTML = '<i class="fas fa-circle" style="color: #10b981;"></i> <span>Servidor conectado</span>';
                        statusEl.style.color = '#10b981';
                    } else {
                        statusEl.innerHTML = '<i class="fas fa-circle" style="color: #ef4444;"></i> <span>Servidor con problemas</span>';
                        statusEl.style.color = '#ef4444';
                    }
                    
                    return data;
                } catch (error) {
                    const statusEl = document.getElementById('apiStatus');
                    statusEl.innerHTML = '<i class="fas fa-circle" style="color: #ef4444;"></i> <span>Error de conexi√≥n</span>';
                    statusEl.style.color = '#ef4444';
                    throw error;
                }
            }
            
            initComponents() {
                // Initialize theme if not already initialized
                if (!window.themeManager) {
                    window.themeManager = new (class {
                        constructor() {
                            this.html = document.documentElement;
                            this.themeToggle = document.getElementById('themeToggle');
                            this.themeText = document.getElementById('themeText');
                            this.init();
                        }
                        
                        init() {
                            const savedTheme = localStorage.getItem('intermappler-theme') || 'light';
                            this.setTheme(savedTheme);
                            
                            this.themeToggle.addEventListener('click', () => this.toggleTheme());
                        }
                        
                        setTheme(theme) {
                            this.html.setAttribute('data-theme', theme);
                            localStorage.setItem('intermappler-theme', theme);
                            this.updateButton(theme);
                        }
                        
                        toggleTheme() {
                            const current = this.html.getAttribute('data-theme');
                            this.setTheme(current === 'light' ? 'dark' : 'light');
                        }
                        
                        updateButton(theme) {
                            const icon = this.themeToggle.querySelector('i');
                            icon.className = theme === 'light' ? 'fas fa-moon' : 'fas fa-sun';
                            
                            // Update text via language manager if available
                            if (window.languageManager) {
                                this.themeText.textContent = theme === 'light' 
                                    ? window.languageManager.translate('themeDark')
                                    : window.languageManager.translate('themeLight');
                            } else {
                                this.themeText.textContent = theme === 'light' ? 'Modo Oscuro' : 'Modo Claro';
                            }
                        }
                    })();
                }
                
                // Initialize language if not already initialized
                if (!window.languageManager) {
                    window.languageManager = new (class {
                        constructor() {
                            this.currentLanguage = 'es';
                            this.translations = {};
                            this.init();
                        }
                        
                        async init() {
                            // Load translations
                            await this.loadTranslations();
                            
                            // Set initial language
                            const savedLang = localStorage.getItem('intermappler-language') || 'es';
                            this.setLanguage(savedLang);
                            
                            // Setup language selector
                            const selector = document.getElementById('languageSelect');
                            if (selector) {
                                selector.value = savedLang;
                                selector.addEventListener('change', (e) => {
                                    this.setLanguage(e.target.value);
                                    localStorage.setItem('intermappler-language', e.target.value);
                                });
                            }
                        }
                        
                        async loadTranslations() {
                            // This would load from a translations file
                            // For now, use inline translations from language.js
                            this.translations = window.translations || {};
                        }
                        
                        setLanguage(lang) {
                            this.currentLanguage = lang;
                            document.documentElement.lang = lang;
                            this.updateUI();
                        }
                        
                        updateUI() {
                            // Update all translatable elements
                            const elements = {
                                tagline: document.getElementById('tagline'),
                                themeText: document.getElementById('themeText'),
                                platformSubtitle: document.getElementById('platformSubtitle'),
                                // ... add all other elements
                            };
                            
                            // This would be populated from translations
                        }
                        
                        translate(key) {
                            // Simple translation lookup
                            return key;
                        }
                    })();
                }
                
                // Initialize login manager
                if (!window.loginManager) {
                    window.loginManager = new (class {
                        constructor() {
                            this.loginForm = document.getElementById('loginForm');
                            this.init();
                        }
                        
                        init() {
                            if (this.loginForm) {
                                this.loginForm.addEventListener('submit', (e) => this.handleSubmit(e));
                            }
                            
                            // Setup password toggle
                            const toggleBtn = document.getElementById('togglePassword');
                            if (toggleBtn) {
                                toggleBtn.addEventListener('click', () => this.togglePassword());
                            }
                        }
                        
                        togglePassword() {
                            const passwordInput = document.getElementById('password');
                            const icon = document.querySelector('#togglePassword i');
                            const type = passwordInput.type === 'password' ? 'text' : 'password';
                            passwordInput.type = type;
                            icon.className = type === 'password' ? 'fas fa-eye' : 'fas fa-eye-slash';
                        }
                        
                        async handleSubmit(e) {
                            e.preventDefault();
                            
                            const email = document.getElementById('email').value;
                            const password = document.getElementById('password').value;
                            
                            // Basic validation
                            if (!email || !password) {
                                this.showMessage('Por favor completa todos los campos', 'error');
                                return;
                            }
                            
                            // Show loading state
                            const btn = document.getElementById('loginButton');
                            const originalHTML = btn.innerHTML;
                            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> <span>Autenticando...</span>';
                            btn.disabled = true;
                            
                            try {
                                const response = await fetch('/api/auth/login', {
                                    method: 'POST',
                                    headers: {
                                        'Content-Type': 'application/json'
                                    },
                                    body: JSON.stringify({ email, password })
                                });
                                
                                const data = await response.json();
                                
                                if (data.success) {
                                    this.showMessage('¬°Autenticaci√≥n exitosa! Redirigiendo...', 'success');
                                    
                                    // Store session data
                                    if (document.getElementById('rememberMe').checked) {
                                        localStorage.setItem('intermappler-session', JSON.stringify(data));
                                    } else {
                                        sessionStorage.setItem('intermappler-session', JSON.stringify(data));
                                    }
                                    
                                    // Redirect to dashboard
                                    setTimeout(() => {
                                        window.location.href = data.redirect || '/dashboard';
                                    }, 1500);
                                    
                                } else {
                                    throw new Error(data.message || 'Error en la autenticaci√≥n');
                                }
                                
                            } catch (error) {
                                this.showMessage(error.message, 'error');
                            } finally {
                                // Restore button
                                btn.innerHTML = originalHTML;
                                btn.disabled = false;
                            }
                        }
                        
                        showMessage(message, type) {
                            // Remove existing messages
                            const existing = document.querySelector('.form-message');
                            if (existing) existing.remove();
                            
                            // Create new message
                            const messageEl = document.createElement('div');
                            messageEl.className = `form-message ${type}`;
                            messageEl.innerHTML = `
                                <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i>
                                <span>${message}</span>
                            `;
                            
                            // Add styles
                            messageEl.style.cssText = `
                                padding: 1rem;
                                border-radius: 0.5rem;
                                margin-top: 1rem;
                                display: flex;
                                align-items: center;
                                gap: 0.5rem;
                                background: ${type === 'success' ? '#10b98120' : '#ef444420'};
                                color: ${type === 'success' ? '#10b981' : '#ef4444'};
                                border: 1px solid ${type === 'success' ? '#10b98140' : '#ef444440'};
                                animation: slideIn 0.3s ease;
                            `;
                            
                            // Insert message
                            const loginCard = document.querySelector('.login-card');
                            if (loginCard) {
                                loginCard.appendChild(messageEl);
                                
                                // Auto remove after 5 seconds
                                setTimeout(() => {
                                    if (messageEl.parentNode) {
                                        messageEl.remove();
                                    }
                                }, 5000);
                            }
                        }
                    })();
                }
            }
            
            setupEventListeners() {
                // Social login buttons
                document.querySelectorAll('.social-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.preventDefault();
                        const provider = btn.classList.contains('google') ? 'Google' :
                                       btn.classList.contains('github') ? 'GitHub' : 'Microsoft';
                        this.showNotification(`Inicio de sesi√≥n con ${provider} - En desarrollo`);
                    });
                });
                
                // Demo items
                document.querySelectorAll('.demo-item').forEach(item => {
                    item.addEventListener('click', () => {
                        const feature = item.getAttribute('data-feature');
                        this.showNotification(`Funci√≥n ${feature} - Vista previa disponible`);
                    });
                });
                
                // Footer links
                document.querySelectorAll('.footer-links a').forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const text = link.textContent;
                        this.showNotification(`${text} - Secci√≥n en desarrollo`);
                    });
                });
                
                // Forgot password and register links
                document.getElementById('forgotLink')?.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.showNotification('Recuperaci√≥n de contrase√±a - En desarrollo');
                });
                
                document.getElementById('registerLink')?.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.showNotification('Solicitud de acceso - En desarrollo');
                });
                
                // Update server time every second
                setInterval(() => this.updateServerTime(), 1000);
                
                // Check server status every 30 seconds
                setInterval(() => this.checkServerHealth(), 30000);
            }
            
            updateDynamicContent() {
                // Update server time
                this.updateServerTime();
                
                // Update system status
                this.updateSystemStatus();
            }
            
            updateServerTime() {
                const now = new Date();
                const timeEl = document.getElementById('serverTime');
                if (timeEl) {
                    timeEl.textContent = `Hora del servidor: ${now.toLocaleTimeString('es-ES')}`;
                }
            }
            
            updateSystemStatus() {
                // This would fetch actual system status from API
                const statusEl = document.getElementById('systemStatus');
                if (statusEl) {
                    statusEl.textContent = 'Sistema Operativo';
                }
            }
            
            hideLoadingScreen() {
                const loadingScreen = document.getElementById('loadingScreen');
                const mainContainer = document.getElementById('mainContainer');
                
                loadingScreen.style.opacity = '0';
                mainContainer.style.opacity = '1';
                
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                }, 300);
            }
            
            showError(message) {
                const errorEl = document.createElement('div');
                errorEl.className = 'global-error';
                errorEl.innerHTML = `
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>${message}</span>
                    <button onclick="this.parentNode.remove()">√ó</button>
                `;
                
                errorEl.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: #ef4444;
                    color: white;
                    padding: 1rem;
                    border-radius: 0.5rem;
                    display: flex;
                    align-items: center;
                    gap: 0.5rem;
                    z-index: 10000;
                    box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
                    animation: slideInRight 0.3s ease;
                `;
                
                document.body.appendChild(errorEl);
                
                setTimeout(() => {
                    if (errorEl.parentNode) {
                        errorEl.remove();
                    }
                }, 5000);
            }
            
            showNotification(message) {
                const notificationEl = document.createElement('div');
                notificationEl.className = 'global-notification';
                notificationEl.innerHTML = `
                    <i class="fas fa-info-circle"></i>
                    <span>${message}</span>
                    <button onclick="this.parentNode.remove()">√ó</button>
                `;
                
                notificationEl.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: #3b82f6;
                    color: white;
                    padding: 1rem;
                    border-radius: 0.5rem;
                    display: flex;
                    align-items: center;
                    gap: 0.5rem;
                    z-index: 10000;
                    box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
                    animation: slideInRight 0.3s ease;
                `;
                
                document.body.appendChild(notificationEl);
                
                setTimeout(() => {
                    if (notificationEl.parentNode) {
                        notificationEl.remove();
                    }
                }, 3000);
            }
        }
        
        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            window.intermapplerApp = new IntermapplerApp();
        });
        
        // Add slideInRight animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideInRight {
                from {
                    transform: translateX(100%);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }
            
            @keyframes slideIn {
                from {
                    transform: translateY(-10px);
                    opacity: 0;
                }
                to {
                    transform: translateY(0);
                    opacity: 1;
                }
            }
            
            /* Additional styles for new elements */
            .platform-badges {
                display: flex;
                gap: 0.5rem;
                margin-top: 1rem;
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .badge {
                padding: 0.25rem 0.75rem;
                border-radius: 1rem;
                font-size: 0.75rem;
                font-weight: 500;
                display: inline-flex;
                align-items: center;
                gap: 0.25rem;
            }
            
            .badge-ai {
                background: rgba(139, 92, 246, 0.1);
                color: #8b5cf6;
                border: 1px solid rgba(139, 92, 246, 0.2);
            }
            
            .badge-realtime {
                background: rgba(59, 130, 246, 0.1);
                color: #3b82f6;
                border: 1px solid rgba(59, 130, 246, 0.2);
            }
            
            .badge-secure {
                background: rgba(16, 185, 129, 0.1);
                color: #10b981;
                border: 1px solid rgba(16, 185, 129, 0.2);
            }
            
            .platform-tech {
                margin-top: 2rem;
                padding: 1.5rem;
                background: var(--surface);
                border-radius: var(--radius-lg);
                border: 1px solid var(--border-color);
            }
            
            .platform-tech h4 {
                color: var(--text-primary);
                margin-bottom: 1rem;
                text-align: center;
            }
            
            .tech-stack {
                display: flex;
                flex-wrap: wrap;
                gap: 1rem;
                justify-content: center;
            }
            
            .tech-item {
                padding: 0.5rem 1rem;
                background: var(--surface-alt);
                border-radius: var(--radius-md);
                font-size: 0.875rem;
                color: var(--text-secondary);
                display: inline-flex;
                align-items: center;
                gap: 0.5rem;
            }
            
            .demo-preview {
                margin-top: 3rem;
                padding: 2rem;
                background: var(--surface);
                border-radius: var(--radius-xl);
                border: 1px solid var(--border-color);
            }
            
            .demo-preview h3 {
                color: var(--text-primary);
                text-align: center;
                margin-bottom: 1.5rem;
            }
            
            .demo-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 1.5rem;
            }
            
            .demo-item {
                padding: 1.5rem;
                background: var(--surface-alt);
                border-radius: var(--radius-lg);
                text-align: center;
                cursor: pointer;
                transition: all 0.3s ease;
                border: 1px solid var(--border-color);
            }
            
            .demo-item:hover {
                transform: translateY(-2px);
                border-color: var(--primary-color);
            }
            
            .demo-item i {
                font-size: 2rem;
                color: var(--primary-color);
                margin-bottom: 1rem;
            }
            
            .demo-item h4 {
                color: var(--text-primary);
                margin-bottom: 0.5rem;
            }
            
            .demo-item p {
                color: var(--text-secondary);
                font-size: 0.875rem;
            }
            
            .api-status {
                margin-top: 1rem;
                padding: 0.75rem;
                background: var(--surface-alt);
                border-radius: var(--radius-md);
                font-size: 0.875rem;
                color: var(--text-secondary);
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }
            
            .footer-info {
                display: flex;
                justify-content: space-between;
                align-items: center;
                width: 100%;
                margin-top: 1rem;
                padding-top: 1rem;
                border-top: 1px solid var(--border-color);
            }
            
            .server-info {
                font-size: 0.75rem;
                color: var(--text-muted);
            }
            
            .global-error button,
            .global-notification button {
                background: none;
                border: none;
                color: white;
                font-size: 1.25rem;
                cursor: pointer;
                padding: 0;
                margin-left: auto;
            }
            
            .form-message {
                padding: 1rem;
                border-radius: 0.5rem;
                margin-top: 1rem;
                display: flex;
                align-items: center;
                gap: 0.5rem;
                animation: slideIn 0.3s ease;
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>